<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adivina el Pok√©mon</title>
    <!-- Fuente pixel art estilo retro -->
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap");
      /* Estilo general del body */
      body {
        font-family: "Press Start 2P", cursive;
        background: linear-gradient(135deg, #ffcb05 0%, #3b4cca 100%);
        color: #333;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }
       /* Contenedor principal de la interfaz */
      .contenedor {
        background: rgba(255, 255, 255, 0.9);
        border: 5px solid #3b4cca;
        border-radius: 15px;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        text-align: center;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }
      /* T√≠tulo */
      h1 {
        font-size: 1.2rem;
        margin-bottom: 20px;
        color: #3b4cca;
        text-shadow: 2px 2px #ffcb05;
      }
      /* Imagen del Pok√©mon */
      .imagen-pokemon {
        margin: 20px auto;
        width: 200px;
        height: 200px;
        image-rendering: pixelated;
        border: 4px solid #3b4cca;
        border-radius: 10px;
        background: #fff;
      }
      /* Caja de texto para la respuesta */
      input[type="text"] {
        padding: 12px;
        font-size: 14px;
        border: 2px solid #3b4cca;
        border-radius: 8px;
        width: 80%;
        margin-top: 10px;
        outline: none;
        text-align: center;
        font-family: inherit;
      }
      /* Botones generales */
      button {
        padding: 10px 20px;
        font-size: 14px;
        border: none;
        border-radius: 8px;
        margin: 5px;
        cursor: pointer;
        font-family: inherit;
        color: white;
        background: #3b4cca;
        transition: background 0.2s, transform 0.1s;
      }
      /* Efecto hover de botones */
      button:hover {
        background: #2a3694;
        transform: scale(1.05);
      }
      /* Bot√≥n de pistas */
      .btn-pistas {
        background: #ffcb05;
        color: #3b4cca;
      }
      /* Hover para bot√≥n de pistas */
      .btn-pistas:hover {
        background: #e6b800;
      }
      /* Texto de puntaje */
      .puntaje {
        margin-top: 20px;
        font-size: 14px;
        color: #3b4cca;
      }
      /* Texto de retroalimentaci√≥n */
      .retroalimentacion {
        font-size: 14px;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <!-- Contenedor principal de todo el juego -->
    <div class="contenedor">
      <h1>¬°Adivina el Pok√©mon!</h1>
      <!-- Bot√≥n inicial -->
      <button id="botonIniciar">Iniciar Partida</button>
      <!-- Zona del juego (oculta al inicio) -->
      <div id="contenedorJuego" style="display: none">
        <img id="imagenPokemon" class="imagen-pokemon" src="" alt="Pokemon" />
        <!-- Input para escribir la respuesta -->
        <input
          id="respuestaUsuario"
          type="text"
          placeholder="¬øQui√©n es este Pok√©mon?" />
        <!-- Botones de verificaci√≥n y pistas -->
        <div>
          <button id="botonVerificar">Verificar</button>
          <button class="btn-pistas" id="botonPistas">Obtener pistas</button>
        </div>
        <!-- Mensajes de acierto/error -->
        <div id="retroalimentacion" class="retroalimentacion"></div>
        <!-- Bot√≥n para pasar al siguiente Pok√©mon -->
        <button id="botonContinuar" style="display: none">Continuar</button>
      </div>
      <!-- Contenedor de puntaje final -->
      <div id="contenedorPuntaje" class="puntaje" style="display: none">
        <p id="textoPuntaje"></p>
      </div>
    </div>
    
    <!-- Script del juego -->
    <script>
      /* === REFERENCIAS A ELEMENTOS DEL DOM === */
      const botonIniciar = document.getElementById("botonIniciar");
      const contenedorJuego = document.getElementById("contenedorJuego");
      const imagenPokemon = document.getElementById("imagenPokemon");
      const respuestaUsuario = document.getElementById("respuestaUsuario");
      const retroalimentacion = document.getElementById("retroalimentacion");
      const contenedorPuntaje = document.getElementById("contenedorPuntaje");
      const textoPuntaje = document.getElementById("textoPuntaje");
      const botonVerificar = document.getElementById("botonVerificar");
      const botonContinuar = document.getElementById("botonContinuar");
      const botonPistas = document.getElementById("botonPistas");

      /* === VARIABLES DE ESTADO DEL JUEGO === */
      let indicePokemonActual = 0;
      let pokemons = [];
      let puntaje = 0;
      let nombreActual = "";
      let pistasMostradas = 0;

       /* === EVENTOS === */

      // Inicia el juego al hacer clic en "Iniciar"
      botonIniciar.addEventListener("click", () => {
        botonIniciar.style.display = "none";
        iniciarJuego();
      });

      /* === FUNCIONES PRINCIPALES === */

      // Obtiene lista de Pok√©mon y empieza la partida
      async function iniciarJuego() {
        try {
          const respuesta = await fetch(
            "https://pokeapi.co/api/v2/pokemon?limit=20"
          );
          const datos = await respuesta.json();
          pokemons = mezclarArray(datos.results);// Orden aleatorio
          mostrarPokemon();
        } catch (error) {
          console.error("Error al obtener los Pok√©mon:", error);
        }
      }

      // Muestra el siguiente Pok√©mon
      async function mostrarPokemon() {
        // Si ya no quedan Pok√©mon ‚Üí fin del juego
        if (indicePokemonActual >= pokemons.length) {
          finalizarJuego();
          return;
        }

        const pokemon = pokemons[indicePokemonActual];
        try {
          // Obtiene detalles del Pok√©mon
          const respuesta = await fetch(pokemon.url);
          const datosPokemon = await respuesta.json();
          const imagenUrl = datosPokemon.sprites.front_default;

          // Configura la imagen y estado inicial
          imagenPokemon.src = imagenUrl;
          respuestaUsuario.value = "";
          retroalimentacion.textContent = "";
          contenedorJuego.style.display = "block";

          nombreActual = pokemon.name.toLowerCase();
          pistasMostradas = 0;

          // Mostrar/ocultar botones
          botonVerificar.style.display = "inline-block";
          botonContinuar.style.display = "none";
        } catch (error) {
          console.error("Error al obtener los detalles del Pok√©mon:", error);
        }
      }

       // Comprueba si la respuesta es correcta
      botonVerificar.addEventListener("click", () => {
        const respuesta = respuestaUsuario.value.trim().toLowerCase();

        if (respuesta === nombreActual) {
          puntaje++;
          retroalimentacion.textContent = "¬°Correcto! üéâ";
          retroalimentacion.style.color = "green";
          botonVerificar.style.display = "none";
          botonContinuar.style.display = "block";
        } else {
          retroalimentacion.textContent = "Incorrecto. Intenta de nuevo.";
          retroalimentacion.style.color = "red";
        }
      });

      // Pasa al siguiente Pok√©mon
      botonContinuar.addEventListener("click", () => {
        indicePokemonActual++;
        mostrarPokemon();
      });

      // Muestra pistas (letras del nombre)
      botonPistas.addEventListener("click", () => {
        if (pistasMostradas < nombreActual.length) {
          pistasMostradas++;
          respuestaUsuario.value = nombreActual.slice(0, pistasMostradas);
        }

        if (pistasMostradas === nombreActual.length) {
          retroalimentacion.textContent = "¬°Ya tienes el nombre completo!";
          retroalimentacion.style.color = "blue";
          botonVerificar.style.display = "none";
          botonContinuar.style.display = "block";
        }
      });

      // Muestra el puntaje fina
      function finalizarJuego() {
        contenedorJuego.style.display = "none";
        textoPuntaje.textContent = `Juego terminado. Tu puntaje final es: ${puntaje}/${pokemons.length}`;
        contenedorPuntaje.style.display = "block";
      }

      // Mezcla aleatoriamente los Pok√©mon (algoritmo Fisher-Yates)
      function mezclarArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }
    </script>
  </body>
</html>

