<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adivina el PokÃ©mon</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap");

      body {
        font-family: "Press Start 2P", cursive;
        background: linear-gradient(135deg, #ffcb05 0%, #3b4cca 100%);
        color: #333;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .contenedor {
        background: rgba(255, 255, 255, 0.9);
        border: 5px solid #3b4cca;
        border-radius: 15px;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        text-align: center;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      }

      h1 {
        font-size: 1.2rem;
        margin-bottom: 20px;
        color: #3b4cca;
        text-shadow: 2px 2px #ffcb05;
      }

      .imagen-pokemon {
        margin: 20px auto;
        width: 200px;
        height: 200px;
        image-rendering: pixelated;
        border: 4px solid #3b4cca;
        border-radius: 10px;
        background: #fff;
      }

      input[type="text"] {
        padding: 12px;
        font-size: 14px;
        border: 2px solid #3b4cca;
        border-radius: 8px;
        width: 80%;
        margin-top: 10px;
        outline: none;
        text-align: center;
        font-family: inherit;
      }

      button {
        padding: 10px 20px;
        font-size: 14px;
        border: none;
        border-radius: 8px;
        margin: 5px;
        cursor: pointer;
        font-family: inherit;
        color: white;
        background: #3b4cca;
        transition: background 0.2s, transform 0.1s;
      }

      button:hover {
        background: #2a3694;
        transform: scale(1.05);
      }

      .btn-pistas {
        background: #ffcb05;
        color: #3b4cca;
      }

      .btn-pistas:hover {
        background: #e6b800;
      }

      .puntaje {
        margin-top: 20px;
        font-size: 14px;
        color: #3b4cca;
      }

      .retroalimentacion {
        font-size: 14px;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="contenedor">
      <h1>Â¡Adivina el PokÃ©mon!</h1>
      <button id="botonIniciar">Iniciar Partida</button>
      <div id="contenedorJuego" style="display: none">
        <img id="imagenPokemon" class="imagen-pokemon" src="" alt="Pokemon" />
        <input
          id="respuestaUsuario"
          type="text"
          placeholder="Â¿QuiÃ©n es este PokÃ©mon?" />
        <div>
          <button id="botonVerificar">Verificar</button>
          <button class="btn-pistas" id="botonPistas">Obtener pistas</button>
        </div>
        <div id="retroalimentacion" class="retroalimentacion"></div>
        <button id="botonContinuar" style="display: none">Continuar</button>
      </div>
      <div id="contenedorPuntaje" class="puntaje" style="display: none">
        <p id="textoPuntaje"></p>
      </div>
    </div>

    <script>
      const botonIniciar = document.getElementById("botonIniciar");
      const contenedorJuego = document.getElementById("contenedorJuego");
      const imagenPokemon = document.getElementById("imagenPokemon");
      const respuestaUsuario = document.getElementById("respuestaUsuario");
      const retroalimentacion = document.getElementById("retroalimentacion");
      const contenedorPuntaje = document.getElementById("contenedorPuntaje");
      const textoPuntaje = document.getElementById("textoPuntaje");
      const botonVerificar = document.getElementById("botonVerificar");
      const botonContinuar = document.getElementById("botonContinuar");
      const botonPistas = document.getElementById("botonPistas");

      let indicePokemonActual = 0;
      let pokemons = [];
      let puntaje = 0;
      let nombreActual = "";
      let pistasMostradas = 0;

      botonIniciar.addEventListener("click", () => {
        botonIniciar.style.display = "none";
        iniciarJuego();
      });

      async function iniciarJuego() {
        try {
          const respuesta = await fetch(
            "https://pokeapi.co/api/v2/pokemon?limit=20"
          );
          const datos = await respuesta.json();
          pokemons = mezclarArray(datos.results);
          mostrarPokemon();
        } catch (error) {
          console.error("Error al obtener los PokÃ©mon:", error);
        }
      }

      async function mostrarPokemon() {
        if (indicePokemonActual >= pokemons.length) {
          finalizarJuego();
          return;
        }

        const pokemon = pokemons[indicePokemonActual];
        try {
          const respuesta = await fetch(pokemon.url);
          const datosPokemon = await respuesta.json();
          const imagenUrl = datosPokemon.sprites.front_default;

          imagenPokemon.src = imagenUrl;
          respuestaUsuario.value = "";
          retroalimentacion.textContent = "";
          contenedorJuego.style.display = "block";

          nombreActual = pokemon.name.toLowerCase();
          pistasMostradas = 0;

          botonVerificar.style.display = "inline-block";
          botonContinuar.style.display = "none";
        } catch (error) {
          console.error("Error al obtener los detalles del PokÃ©mon:", error);
        }
      }

      botonVerificar.addEventListener("click", () => {
        const respuesta = respuestaUsuario.value.trim().toLowerCase();

        if (respuesta === nombreActual) {
          puntaje++;
          retroalimentacion.textContent = "Â¡Correcto! ðŸŽ‰";
          retroalimentacion.style.color = "green";
          botonVerificar.style.display = "none";
          botonContinuar.style.display = "block";
        } else {
          retroalimentacion.textContent = "Incorrecto. Intenta de nuevo.";
          retroalimentacion.style.color = "red";
        }
      });

      botonContinuar.addEventListener("click", () => {
        indicePokemonActual++;
        mostrarPokemon();
      });

      botonPistas.addEventListener("click", () => {
        if (pistasMostradas < nombreActual.length) {
          pistasMostradas++;
          respuestaUsuario.value = nombreActual.slice(0, pistasMostradas);
        }

        if (pistasMostradas === nombreActual.length) {
          retroalimentacion.textContent = "Â¡Ya tienes el nombre completo!";
          retroalimentacion.style.color = "blue";
          botonVerificar.style.display = "none";
          botonContinuar.style.display = "block";
        }
      });

      function finalizarJuego() {
        contenedorJuego.style.display = "none";
        textoPuntaje.textContent = `Juego terminado. Tu puntaje final es: ${puntaje}/${pokemons.length}`;
        contenedorPuntaje.style.display = "block";
      }

      function mezclarArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }
    </script>
  </body>
</html>
